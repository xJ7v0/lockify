#!/bin/sh
usage () {
	cat <<EOF
Usage: $0 [OPTION]... [VAR=VALUE]... [TARGET]

Installation directories:
  --prefix=PREFIX         main installation prefix [/usr/local]
  --exec-prefix=EPREFIX   installation prefix for executable files [PREFIX]

EOF
	exit 0
}

prefix="/usr/local"
exec_prefix='$PREFIX'

# interate over all the arguments passed to the configure script
for arg; do
	case "$arg" in
		--help|-h) usage ;;
		--srcdir=*) srcdir=${arg#*=} ;;
		--prefix=*) prefix=${arg#*=} ;;
		--exec-prefix=*) exec_prefix=${arg#*=} ;;
		-* ) echo "$0: unknown option $arg" ;;
	esac
done


printf "creating config.mak... "

exec 3>&1 1>config.mak

cat << EOF
# This version of config.mak was generated by:
# $0 $@
# Any changes made here will be lost if configure is re-run
PREFIX=$prefix
EXEC_PREFIX=$exec_prefix
EOF

exec 1>&3 3>&-

printf "done\n"
